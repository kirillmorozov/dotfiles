---
- name: Add GitHub CLI repository
  become: true
  block:
    - name: Get keyring
      ansible.builtin.get_url:
        dest: /etc/apt/keyrings/githubcli-archive-keyring.gpg
        url: https://cli.github.com/packages/githubcli-archive-keyring.gpg
    - name: Add repository
      ansible.builtin.apt_repository:
        repo: >-
          deb [arch={{ ansible_architecture }}
          signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg]
          https://cli.github.com/packages stable main
        state: present
- name: Linux Mint packages installed
  become: true
  when: ansible_distribution == "Linux Mint"
  ansible.builtin.apt:
    package: "{{ deb_packages }}"
    state: latest
