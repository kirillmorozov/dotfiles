---
version: '3'

vars:
  ALACRITTY_CONFIG_DIR: ~/.config/alacritty
  ALACRITTY_DARK_THEME: rose-pine
  ALACRITTY_LIGHT_THEME: rose-pine-dawn
  HELIX_CONFIG_DIR: ~/.config/helix
  HELIX_DARK_THEME: "rose_pine"
  HELIX_LIGHT_THEME: "rose_pine_dawn"

tasks:
  change-theme:
    desc: Switch from one theme to another
    internal: true
    silent: true
    requires:
      vars:
        - NEW
        - OLD
        - WHERE
    cmds:
      - sed --follow-symlinks -i 's/{{.OLD}}/{{.NEW}}/' {{.WHERE}}

  light:
    desc: Switch to light theme
    deps:
      - task: change-theme
        vars:
          NEW: "{{.ALACRITTY_LIGHT_THEME}}.yml"
          OLD: "{{.ALACRITTY_DARK_THEME}}.yml"
          WHERE: "{{.ALACRITTY_CONFIG_DIR}}/alacritty.yml"
      - task: change-theme
        vars:
          NEW: "{{.ALACRITTY_LIGHT_THEME}}.toml"
          OLD: "{{.ALACRITTY_DARK_THEME}}.toml"
          WHERE: "{{.ALACRITTY_CONFIG_DIR}}/alacritty.toml"
      - task: change-theme
        vars:
          NEW: "\"{{.HELIX_LIGHT_THEME}}\""
          OLD: "\"{{.HELIX_DARK_THEME}}\""
          WHERE: "{{.HELIX_CONFIG_DIR}}/config.toml"

  dark:
    desc: Switch to dark theme
    deps:
      - task: change-theme
        vars:
          NEW: "{{.ALACRITTY_DARK_THEME}}.yml"
          OLD: "{{.ALACRITTY_LIGHT_THEME}}.yml"
          WHERE: "{{.ALACRITTY_CONFIG_DIR}}/alacritty.yml"
      - task: change-theme
        vars:
          NEW: "{{.ALACRITTY_DARK_THEME}}.toml"
          OLD: "{{.ALACRITTY_LIGHT_THEME}}.toml"
          WHERE: "{{.ALACRITTY_CONFIG_DIR}}/alacritty.toml"
      - task: change-theme
        vars:
          NEW: "\"{{.HELIX_DARK_THEME}}\""
          OLD: "\"{{.HELIX_LIGHT_THEME}}\""
          WHERE: "{{.HELIX_CONFIG_DIR}}/config.toml"
